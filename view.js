const resumeData = { "importantDetails": { "email": "sunil.jpmc@gmail.com", "experience": "17y", "mobile": "07356336326", "name": "Sunil Kadayaprath", "primarySkills": "Cognos [3Yr:in2011]; Business Objects [1Yr:in2008]; Talend [2Yr:in2020]; SQL [9Yr 5m:in2024]; Informatica [16Yr:in2024]; SQL [10Yr:in2024]; Oracle [10Yr:in2024]; Routers [3Yr:in2005]; Iics [3Yr:in2024]; DWB [1Yr:in2018]; BO [1Yr:in2007]; Datastage [2Yr:in2007]; SyBase [4Yr:in2012]; Db2 [2Yr:in2012]; UNIX [5Yr:in2020]; SSRS [0Yr 06m:in2014]; Pentaho [6Yr:in2020];" }, "otherDetails": { "certifications": [{ "course": "DOEACC A Level certificate", "vendor": "DOEACC" }, { "course": "", "vendor": "" }], "currentRole": { "company": "UST", "position": "Lead II - Software Engineering", "since": "" }, "desiredJob": { "employmentStatus": "Full time", "jobType": "Permanent" }, "educationDetails": [{ "degree": "MCA", "field": "Computers", "institution": "DOEACC", "type": "PG", "year": "2002 PG" }, { "degree": "B.Sc", "field": "Chemistry", "institution": "Kannur University", "type": "UG", "year": "1999 UG" }], "highestDegree": { "degree": "MCA", "institution": "DOEACC" }, "itSkills": [{ "experience": "3y", "lastUsed": "2011", "skill": "Cognos", "version": "8.X,10" }, { "experience": "1y", "lastUsed": "2008", "skill": "Business Objects", "version": "- -" }, { "experience": "2y", "lastUsed": "2020", "skill": "Talend", "version": "- -" }, { "experience": "9y 5m", "lastUsed": "2024", "skill": "SQL Server", "version": "2002/05/08" }, { "experience": "16y", "lastUsed": "2024", "skill": "Informatica", "version": "10x" }, { "experience": "10y", "lastUsed": "2024", "skill": "SQL", "version": "- -" }, { "experience": "10y", "lastUsed": "2024", "skill": "Oracle", "version": "9i,10g,11g" }, { "experience": "3y", "lastUsed": "2005", "skill": "Routers", "version": "- -" }, { "experience": "3y", "lastUsed": "2024", "skill": "Iics", "version": "- -" }, { "experience": "1y", "lastUsed": "2018", "skill": "DWB", "version": "- -" }, { "experience": "1y", "lastUsed": "2007", "skill": "BO", "version": "- -" }, { "experience": "2y", "lastUsed": "2007", "skill": "Datastage", "version": "- -" }, { "experience": "4y", "lastUsed": "2012", "skill": "SyBase", "version": "IQ" }, { "experience": "2y", "lastUsed": "2012", "skill": "Db2", "version": "- -" }, { "experience": "5y", "lastUsed": "2020", "skill": "UNIX", "version": "- -" }, { "experience": "0y 06m", "lastUsed": "2014", "skill": "SSRS", "version": "- -" }, { "experience": "6y", "lastUsed": "2020", "skill": "Pentaho", "version": "- -" }], "jobInfo": { "currentSalary": "₹ 25.50 Lacs", "expectedSalary": "₹ 30.0 Lacs", "linkedin": "", "location": "Kochi", "noticePeriod": "Available to join in 15 days or less" }, "languages": [{ "capabilities": "Read,Write,Speak", "language": "English", "proficiency": "Expert" }, { "capabilities": "Read,Write,Speak", "language": "Hindi", "proficiency": "Expert" }, { "capabilities": "Read,Write,Speak", "language": "Malayalam", "proficiency": "Expert" }], "metadata": { "downloads": "53", "lastActive": "Active today", "lastUpdated": "Last updated on 28 Apr, '25", "views": "285" }, "otherProjects": [{ "company": "Project Leader at DHL(Full time, Offsite)", "description": "Finance Datas (Actual, Budget, Forecast, Overlay, Adjustments) are pulled from different source systems and moved to FACT GL. Source systems", "duration": "Mar '15 to Jun '18", "name": "ITG-FSS", "role": "Finance Datas (Actual, Budget, Forecast, Overlay, Adjustments) are pulled from different source systems and moved to FACT GL. Source systems", "skills": "Informatica 9.0.1, Pentaho 4.4.0, Oracle 11G", "teamInfo": "Informatica 9.0.1, Pentaho 4.4.0, Oracle 11G", "type": "Other Project" }], "personalDetails": { "category": "Category", "dob": "9 Oct 1978", "gender": "Gender", "maritalStatus": "Marital status", "physicallyChallenged": "Physically Challenged" }, "preferredLocations": ["Bengaluru,", "Kochi,", "United Arab Emirates"], "profileSummary": "MCA with 17 years of strong Business Intelligence and Data warehousing experience using Informatica, Talend and Pentaho. ETL: Informatica, IICS, data stage, SSIS, Pentaho, Talend , Reporting: Cognos, SSRS , Databases: Oracle, SQL, Sybase, Snowflake", "skills": { "additionalSkills": ["Informatica Powercenter", "Talend Open Studio", "Informatica Admin"], "assessedSkills": [], "keySkills": ["Datastage", "UNIX", "SQL", "ETL Tool", "Informatica", "ETL", "Data Warehousing", "SyBase", "Talend", "Pentaho", "Snowflake", "Oracle", "Iics", "SSIS", "Informatica MDM", "SSRS", "Business Intelligence", "DB2", "Knime", "Domo", "Oracle 8I/9I/10G", "SQL Server 2005/2008", "SQL Server", "Dwb", "Cognos 8 X", "Informatica 9X", "Informatica 10X", "Informatica Powercenter", "Talend Open Studio", "Informatica Admin"] }, "workAuthorization": { "otherCountries": "", "usStatus": "Need US H1 Visa" }, "workExperiences": [{ "company": "UST", "description": "The IICS (Informatica Cloud) and Informatica, hands on role that will develop and deliver solutions that enable the collection, transformation and management of information from one or more sources. The Informatica process is critical to the loading of the (Athena) Synapse databases / tables, EFRM batch, load data to Dimension and Sales Fact. Monitor all these batch jobs and fix and respond timely if any failures", "duration": "Jun '22 till Feb '25 ( 2y 8m )", "position": "Lead II - Software Engineering" }, { "company": "ValueLabs", "description": "Worked on a transition project to migrate all the jobs and data from all Platform to DOMO (cloud based BI tool). Develop and Migrate all the ETL jobs from Talend and Views from Snowflake into a singly Data Engineering and Analytical Platform DOMO so that Domo's integrated platform delivers BI leverage at cloud scale in record time. By using DOMO, the project provides", "duration": "Apr '21 till Mar '22 ( 11m )", "position": "Associate Architect" }, { "company": "Williams Lea", "description": "Roles & Responsibilities: • Provide analysis, design, development, review, validation and code review for all Informatica and Pentaho mappings and Introduced design standards for ETL processes to enhance audit and support. • Migrate the codes from informatica to Pentaho for the future setup • Design, Development, Unit testing of Infromatica and Pentaho data loading process • Assisted Business Analyst in documenting business requirements, technical specifications and implementation of various ETL standards in the mappings. • Provide weekly project reports on status and issues to management. • Train and mentor other staff members on all aspects of Pentaho including mappings, transformations, Scheduler etc. • Facilitated and conducted business team meetings with other team leaders to identify and meet company goals and strategies and to increase communication between groups", "duration": "Mar '15 till Mar '21 ( 6y )", "position": "Technical Lead" }, { "company": "Mashreq Bank", "description": "Worked as informatica consultant", "duration": "Oct '14 till Jan '15 ( 3m )", "position": "Informatica Consultant" }, { "company": "GalaxE solutions Pvt Ltd, India", "description": "Worked as Informatica Devoloper.", "duration": "Oct '11 till Jul '14 ( 2y 9m )", "position": "Senior Software Engineer" }, { "company": "CoreLogic (FIC) Bangalore", "description": "Worked as Informatica Developer", "duration": "Oct '07 till Sep '11 ( 3y 11m )", "position": "Senior Software Engineer" }], "workSummary": "MCA with 14+ years of experience in implementing Data warehousing / Business Intelligence Solutions using Informatica, Pentaho and Talend also Databases like Oracle,SQL server, sybase and Snowflake.This experience helps in understanding business requirements and solutions. I have experience in Data Warehousing ETL Designing, Business Intelligence Solutions, Expertise in laying out roll out plan to reach Enterprise warehouse solution, strong communication skills and focused on project deliverables. and also worked extensively on designing and developing ETL logics using Informatica, Pentaho and Talend." } }
// Utility functions
const displayStatus = (message, type) => {
    const statusMessage = document.getElementById("statusMessage");
    const statusMessageText = document.getElementById("statusMessageText");

    statusMessageText.textContent = message;
    statusMessage.className = `alert alert-${type} alert-dismissible fade show`;
    statusMessage.style.display = 'block';

    // Add a subtle animation
    statusMessage.style.animation = 'fadeInUp 0.3s ease-out';

    setTimeout(() => {
        statusMessage.style.animation = 'fadeOutDown 0.3s ease-out';
        setTimeout(() => {
            $(statusMessage).alert('close');
        }, 280);
    }, 5000);
}

const isJSON = (str) => {
    try {
        JSON.parse(str);
        return true;
    } catch (e) {
        return false;
    }
}

// Component rendering functions with improved styling
const displayWorkExperiences = (experiences) => {
    if (!experiences || !Array.isArray(experiences) || experiences.length === 0) return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No work experience found
        </div>
    `;

    return `
        <div class="table-responsive card shadow-sm">
            <table class="table table-hover mb-0">
                <thead class="bg-gradient-primary text-white">
                    <tr>
                        <th class="border-0">Company</th>
                        <th class="border-0">Position</th>
                        <th class="border-0">Duration</th>
                        <th class="border-0">Description</th>
                    </tr>
                </thead>
                <tbody>
                    ${experiences.map(exp => `
                        <tr class="experience-row">
                            <td class="font-weight-medium">${exp.company || 'N/A'}</td>
                            <td>${exp.position || 'N/A'}</td>
                            <td><span class="badge badge-light">${exp.duration || 'N/A'}</span></td>
                            <td class="text-muted small">${exp.description || 'N/A'}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

const displayEducationDetails = (education) => {
    if (!education || !Array.isArray(education) || education.length === 0) return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No education details found
        </div>
    `;

    return `
        <div class="table-responsive card shadow-sm">
            <table class="table table-hover mb-0">
                <thead class="bg-gradient-primary text-white">
                    <tr>
                        <th class="border-0">Degree</th>
                        <th class="border-0">Field</th>
                        <th class="border-0">Institution</th>
                        <th class="border-0">Year</th>
                        <th class="border-0">Type</th>
                    </tr>
                </thead>
                <tbody>
                    ${education.map(edu => `
                        <tr class="education-row">
                            <td class="font-weight-medium">${edu.degree || 'N/A'}</td>
                            <td>${edu.field || 'N/A'}</td>
                            <td>${edu.institution || 'N/A'}</td>
                            <td><span class="badge badge-light">${edu.year || 'N/A'}</span></td>
                            <td>${edu.type || 'N/A'}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

//display work summary split into multiple components by *
const displayWorkSummary = (workSummary) => {
    if (!workSummary || typeof workSummary !== 'string') {
        return `
            <div class="alert alert-warning rounded-lg shadow-sm">
                <i class="fas fa-exclamation-circle mr-2"></i> No work summary found
            </div>
        `;
    }

    let summary = [];

    // First try to split by newlines (most reliable for the given example)
    const lineItems = workSummary.split('\n')
        .map(item => item.trim())
        .filter(item => item);

    if (lineItems.length > 1) {
        // If we have multiple lines, use those as our summary items
        summary = lineItems;
    } else if (workSummary.includes('•')) {
        // Otherwise try bullet points
        summary = workSummary.split('•')
            .map(item => item.trim())
            .filter(item => item);
    } else {
        // Try to intelligently parse sentences without breaking decimal numbers
        // This regex looks for sentence boundaries by finding periods followed by spaces or end of string
        const sentenceRegex = /\.(?=\s|$)/g;
        const text = workSummary.replace(/\n/g, ' ');

        // Split by sentences
        const sentences = text.split(sentenceRegex)
            .map(item => item.trim())
            .filter(item => item);

        if (sentences.length > 0) {
            summary = sentences;
        } else {
            // Last resort: split by commas if other methods yielded nothing
            summary = text.split(',')
                .map(item => item.trim())
                .filter(item => item);
        }
    }

    if (summary.length === 0) {
        return `
            <div class="alert alert-warning rounded-lg shadow-sm">
                <i class="fas fa-exclamation-circle mr-2"></i> No work summary found
            </div>
        `;
    }

    return `
        <div class="table-responsive card shadow-sm">
            <table class="table table-hover mb-0">
                <thead class="bg-gradient-primary text-white">
                    <tr>
                        <th class="border-0">Summary</th>
                    </tr>
                </thead>
                <tbody>
                    ${summary.map(sum => `
                        <tr class="summary-row">
                            <td class="text-muted">${sum || 'N/A'}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

displayWorkAuthorization = (workAuth) => {
    if (!workAuth || typeof workAuth !== 'object') {
        return `
            <div class="alert alert-warning rounded-lg shadow-sm">
                <i class="fas fa-exclamation-circle mr-2"></i> No work authorization found
            </div>
        `;
    }

    return `
        <div class="card shadow-sm p-0">
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-briefcase text-primary mr-2"></i>
                        <span class="font-weight-medium">${workAuth.usStatus || 'N/A'}</span>
                    </div>
                    <span class="badge badge-soft-info badge-pill">${workAuth.otherCountries || 'N/A'}</span>
                </li>
            </ul>
        </div>
    `;
}

const displayTechnicalSkills = (skills) => {
    if (!skills || !Array.isArray(skills) || skills.length === 0) return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No skills found
        </div>
    `;

    return `
        <div class="table-responsive card shadow-sm">
            <table class="table table-hover mb-0">
                <thead class="bg-gradient-primary text-white">
                    <tr>
                        <th class="border-0">Skill</th>
                        <th class="border-0">Experience</th>
                        <th class="border-0">Last Used</th>
                        <th class="border-0">Version</th>
                    </tr>
                </thead>
                <tbody>
                    ${skills.map(skill => `
                        <tr class="skill-row">
                            <td class="font-weight-medium">${skill.skill || 'N/A'}</td>
                            <td><span class="badge badge-info">${skill.experience || 'N/A'}</span></td>
                            <td>${skill.lastUsed || 'N/A'}</td>
                            <td>${skill.version || 'N/A'}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

const displayCertifications = (certs) => {
    if (!certs || !Array.isArray(certs) || certs.length === 0) return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No certifications found
        </div>
    `;

    return `
        <div class="card shadow-sm p-0">
            <ul class="list-group list-group-flush">
                ${certs.map(cert => `
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-certificate text-primary mr-2"></i>
                            <span class="font-weight-medium">${cert.course || 'N/A'}</span>
                        </div>
                        <span class="badge badge-soft-primary badge-pill">${cert.vendor || 'N/A'}</span>
                    </li>
                `).join('')}
            </ul>
        </div>
    `;
}

const displayProjects = (projects) => {
    if (!projects || !Array.isArray(projects) || projects.length === 0) {
        return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No projects found
        </div>
    `;
    } else {
        return `
        <div class="card shadow-sm p-0">
            <ul class="list-group list-group-flush">
                ${projects.map(project => `
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-project-diagram text-primary mr-2"></i>
                            <span class="font-weight-medium">${project.name || 'N/A'}</span>
                        </div>
                        <span class="badge badge-soft-info badge-pill">${project.duration || 'N/A'}</span>
                    </li>
                `).join('')}
            </ul>
        </div>
    `;
    }
}

const displayLanguages = (languages) => {
    if (!languages || !Array.isArray(languages) || languages.length === 0) return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No language information found
        </div>
    `;

    const getProficiencyColor = (proficiency) => {
        switch (proficiency) {
            case 'Expert': return 'success';
            case 'Proficient': return 'info';
            default: return 'primary';
        }
    };

    const getProficiencyWidth = (proficiency) => {
        switch (proficiency) {
            case 'Expert': return '100%';
            case 'Proficient': return '75%';
            default: return '50%';
        }
    };

    return `
        <div class="table-responsive card shadow-sm">
            <table class="table table-hover mb-0">
                <thead class="bg-gradient-primary text-white">
                    <tr>
                        <th class="border-0">Language</th>
                        <th class="border-0" style="width: 40%">Proficiency</th>
                        <th class="border-0">Capabilities</th>
                    </tr>
                </thead>
                <tbody>
                    ${languages.map(lang => `
                        <tr class="language-row">
                            <td class="font-weight-medium">${lang.language || 'N/A'}</td>
                            <td>
                                <div class="progress" style="height: 6px;">
                                    <div class="progress-bar bg-${getProficiencyColor(lang.proficiency)}" 
                                         role="progressbar" 
                                         style="width: ${getProficiencyWidth(lang.proficiency)}" 
                                         aria-valuenow="${lang.proficiency === 'Expert' ? '100' : lang.proficiency === 'Proficient' ? '75' : '50'}" 
                                         aria-valuemin="0" 
                                         aria-valuemax="100">
                                    </div>
                                </div>
                                <small class="mt-1 d-block text-${getProficiencyColor(lang.proficiency)}">${lang.proficiency || 'N/A'}</small>
                            </td>
                            <td class="text-muted small">${lang.capabilities || 'N/A'}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

const displayDesiredJob = (job) => {
    if (!job || typeof job !== 'object') return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No desired job information found
        </div>
    `;

    return `
        <div class="card shadow-sm p-0">
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-briefcase text-primary mr-2"></i>
                        <span class="font-weight-medium">${job.title || 'N/A'}</span>
                    </div>
                    <span class="badge badge-soft-info badge-pill">${job.company || 'N/A'}</span>
                </li>
            </ul>
        </div>
    `;
}

const displaySkills = (skillsData) => {
    if (!skillsData || typeof skillsData !== 'object') return `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No skills information found
        </div>
    `;

    let html = '';

    // Key Skills
    if (skillsData.keySkills && skillsData.keySkills.length > 0) {
        html += `
            <div class="mb-4">
                <h6 class="text-primary d-flex align-items-center">
                    <i class="fas fa-star mr-2"></i>Key Skills
                </h6>
                <div class="d-flex flex-wrap">
                    ${skillsData.keySkills.map(skill => `
                        <span class="badge badge-soft-secondary m-1 py-2 px-3">${skill}</span>
                    `).join('')}
                </div>
            </div>
        `;
    }

    // Additional Skills
    if (skillsData.additionalSkills && skillsData.additionalSkills.length > 0) {
        html += `
            <div class="mb-4">
                <h6 class="text-primary d-flex align-items-center">
                    <i class="fas fa-plus-circle mr-2"></i>Additional Skills
                </h6>
                <div class="d-flex flex-wrap">
                    ${skillsData.additionalSkills.map(skill => `
                        <span class="badge badge-soft-secondary m-1 py-2 px-3">${skill}</span>
                    `).join('')}
                </div>
            </div>
        `;
    }

    // Assessed Skills (if any)
    if (skillsData.assessedSkills && skillsData.assessedSkills.length > 0) {
        html += `
            <div class="mb-4">
                <h6 class="text-primary d-flex align-items-center">
                    <i class="fas fa-check-circle mr-2"></i>Naukari Assessed Skills
                </h6>
                <div class="d-flex flex-wrap">
                    ${skillsData.assessedSkills.map(skill => `
                        <span class="badge badge-soft-success m-1 py-2 px-3">${skill}</span>
                    `).join('')}
                </div>
            </div>
        `;
    }

    return html || `
        <div class="alert alert-warning rounded-lg shadow-sm">
            <i class="fas fa-exclamation-circle mr-2"></i> No skills data available
        </div>
    `;
}

// Main function to display resume data
const viewNetworkDetails = (jsonData, contactless = false) => {
    try {
        if (!jsonData) {
            throw new Error("No JSON data found");
        }

        if (!isJSON(jsonData)) {
            throw new Error("Invalid JSON data");
        }

        const parsedData = JSON.parse(jsonData);
        console.log(parsedData);

        let html = `
        <!-- Add global styles -->
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
            
            #view-container {
                font-family: 'Inter', sans-serif;
                color: #495057;
                line-height: 1.6;
            }
            
            .bg-gradient-primary {
                background: linear-gradient(135deg, #4e73df 0%, #224abe 100%);
            }
            
            .profile-header h1 {
                font-weight: 700;
                letter-spacing: -0.02em;
            }
            
            .section-container {
                border-radius: 8px;
                transition: all 0.2s;
            }
            
            .section-container:hover {
                box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.08);
            }
            
            .section-title {
                font-weight: 600;
                color: #364fc7;
                display: flex;
                align-items: center;
                margin-bottom: 1rem;
            }
            
            .badge-soft-primary {
                color: #364fc7;
                background-color: rgba(78, 115, 223, 0.1);
            }
            
            .badge-soft-secondary {
                color: #5a6268;
                background-color: rgba(90, 98, 104, 0.1);
            }
            
            .badge-soft-success {
                color: #1cc88a;
                background-color: rgba(28, 200, 138, 0.1);
            }
            
            .badge-soft-info {
                color: #36b9cc;
                background-color: rgba(54, 185, 204, 0.1);
            }
            
            .card {
                border: none;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .experience-row:hover, .education-row:hover, .skill-row:hover, .language-row:hover {
                background-color: rgba(78, 115, 223, 0.05);
            }
            
            .list-group-item {
                border-left: none;
                border-right: none;
                transition: all 0.2s;
            }
            
            .list-group-item:hover {
                background-color: rgba(78, 115, 223, 0.05);
            }
            
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            @keyframes fadeOutDown {
                from {
                    opacity: 1;
                    transform: translateY(0);
                }
                to {
                    opacity: 0;
                    transform: translateY(20px);
                }
            }
        </style>
        `;

        // Important Details (Header Section)
        if (!parsedData.importantDetails) {
            displayStatus("No important details found", "warning");
        } else {
            const important = parsedData.importantDetails;
            if (contactless) {
                html += `
                <div class="bg-gradient-primary text-white p-4 rounded-lg shadow profile-header">
                    <div class="row">
                        <div class="col-md-8">
                            <h1 class="display-4 mb-2">${important.name.split(' ')[0] || 'N/A'}</h1>
                            <p class="lead"><i class="fas fa-briefcase mr-2"></i>${important.experience || 'N/A'} of experience</p>
                        </div>
                    </div>
                </div>
                 <div class="p-4 border-bottom section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-star mr-2"></i>Primary Skills</h4>
                    <div class="d-flex flex-wrap">
                        ${(important.primarySkills || 'N/A').split(';').map(skill => `
                            <span class="badge badge-soft-primary m-1 py-2 px-3">${skill.trim()}</span>
                        `).join('')}
                    </div>
                </div>
                `;
            } else {
                if (important.mobile === '+91') {
                    important.mobile = 'N/A';
                }
                html += `
                <div class="bg-gradient-primary text-white p-4 rounded-lg shadow profile-header">
                    <div class="row">
                        <div class="col-md-8">
                            <h1 class="display-4 mb-2">${important.name || 'N/A'}</h1>
                            <p class="lead"><i class="fas fa-briefcase mr-2"></i>${important.experience || 'N/A'} of experience</p>
                        </div>
                        <div class="col-md-4 text-md-right">
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-envelope mr-2"></i>${important.email || 'N/A'}</li>
                                <li><i class="fas fa-phone mr-2"></i>${important.mobile || 'N/A'}</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="p-4 border-bottom section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-star mr-2"></i>Primary Skills</h4>
                    <div class="d-flex flex-wrap">
                        ${(important.primarySkills || 'N/A').split(';').map(skill => `
                            <span class="badge badge-soft-primary m-1 py-2 px-3">${skill.trim()}</span>
                        `).join('')}
                    </div>
                </div>
                `;
            }
        }

        // Other Details
        if (!parsedData.otherDetails) {
            displayStatus("No other details found", "warning");
        } else {
            const other = parsedData.otherDetails;

            // Profile Summary
            if (other.profileSummary) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-user mr-2"></i>Profile Summary</h4>
                    <p class="text-muted">${other.profileSummary}</p>
                </div>
                `;
            }

            // Current Role
            if (other.currentRole) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-briefcase mr-2"></i>Current Role</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Company</h6>
                                <p class="mb-0 font-weight-medium">${other.currentRole.company || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Position</h6>
                                <p class="mb-0 font-weight-medium">${other.currentRole.position || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Since</h6>
                                <p class="mb-0 font-weight-medium">${other.currentRole.since || 'N/A'}</p>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            }

            // Job Info
            if (other.jobInfo) {
                html += `
    <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
        <h4 class="section-title"><i class="fas fa-info-circle mr-2"></i>Job Information</h4>
        <div class="row">
            <div class="col-md-3">
                <div class="card bg-light p-3">
                    <h6 class="text-primary mb-2">Current Salary</h6>
                    <p class="mb-0 font-weight-medium">${other.jobInfo.currentSalary || 'N/A'}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-light p-3">
                    <h6 class="text-primary mb-2">Expected Salary</h6>
                    <p class="mb-0 font-weight-medium">${other.jobInfo.expectedSalary || 'N/A'}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-light p-3">
                    <h6 class="text-primary mb-2">Location</h6>
                    <p class="mb-0 font-weight-medium">${other.jobInfo.location || 'N/A'}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-light p-3">
                    <h6 class="text-primary mb-2">Notice Period</h6>
                    <p class="mb-0 font-weight-medium">${other.jobInfo.noticePeriod || 'N/A'}</p>
                </div>
            </div>`;

                if (!contactless) {
                    html += `
            <div class="col-md-3 mt-3">
                <div class="card bg-light p-3">
                    <h6 class="text-primary mb-2">LinkedIn</h6>
                    <p class="mb-0 font-weight-medium"><a href="${other.jobInfo.linkedin || '#'}" target="_blank">${other.jobInfo.linkedin || 'N/A'}</a></p>
                </div>
            </div>`;
                }

                html += `
        </div>
    </div>
    `;
            }

            // Work Experiences
            if (other.workExperiences) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-building mr-2"></i>Work Experience</h4>
                    ${displayWorkExperiences(other.workExperiences)}
                </div>
                `;
            }

            // Education
            if (other.educationDetails) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-graduation-cap mr-2"></i>Education</h4>
                    ${displayEducationDetails(other.educationDetails)}
                    ${other.highestDegree ? `
                        <div class="alert alert-info mt-3 rounded-lg shadow-sm">
                            <i class="fas fa-award mr-2"></i><strong>Highest Degree:</strong> ${other.highestDegree.degree || 'N/A'} from ${other.highestDegree.institution || 'N/A'}
                        </div>
                    ` : ''}
                </div>
                `;
            }

            // Skills
            if (other.itSkills) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-code mr-2"></i>Technical Skills</h4>
                    ${displayTechnicalSkills(other.itSkills)}
                </div>
                `;
            }

            // Certifications
            if (other.certifications) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-certificate mr-2"></i>Certifications</h4>
                    ${displayCertifications(other.certifications)}
                </div>
                `;
            }

            // Languages
            if (other.languages) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-language mr-2"></i>Languages</h4>
                    ${displayLanguages(other.languages)}
                </div>
                `;
            }

            // Preferred Locations
            if (other.preferredLocations) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-map-marker-alt mr-2"></i>Preferred Locations</h4>
                    <div class="d-flex flex-wrap">
                        ${other.preferredLocations.map(loc => `
                            <span class="badge badge-soft-info m-1 py-2 px-3">${loc.trim()}</span>
                        `).join('')}
                    </div>
                </div>
                `;
            }

            // Work Summary
            if (other.workSummary) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-briefcase mr-2"></i>Work Summary</h4>
                    <p>${displayWorkSummary(other.workSummary) || 'N/A'}</p>
                </div>
                `;
            }
            //work authorization
            if (other.workAuthorization) {
                console.log(other.workAuthorization);
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-briefcase mr-2"></i>Work Authorization</h4>
                    ${displayWorkAuthorization(other.workAuthorization)}
                </div>
                `;
            }


            // Other Projects
            if (other.otherProjects) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-project-diagram mr-2"></i>Other Projects</h4>
                    ${displayProjects(other.otherProjects)}
                </div>
                `;
            }

            // Skills from skills object
            if (other.skills) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-tools mr-2"></i>Skills Summary</h4>
                    ${displaySkills(other.skills)}
                </div>
                `;
            }
            //desiredJob
            if (other.desiredJob) {
                html += `
               <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4">
                    <h4 class="section-title"><i class="fas fa-briefcase mr-2"></i>Desired Job</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Company</h6>
                                <p class="mb-0 font-weight-medium">${other.desiredJob.employmentStatus || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Position</h6>
                                <p class="mb-0 font-weight-medium">${other.desiredJob.jobType || 'N/A'}</p>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            }

            // Personal Details
            if (!contactless && other.personalDetails) {
                html += `
                <div class="p-4 section-container bg-white shadow-sm rounded-lg mt-4 mb-4">
                    <h4 class="section-title"><i class="fas fa-user-circle mr-2"></i>Personal Details</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Date of Birth</h6>
                                <p class="mb-0 font-weight-medium">${other.personalDetails.dob || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Gender</h6>
                                <p class="mb-0 font-weight-medium">${other.personalDetails.gender || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light p-3">
                                <h6 class="text-primary mb-2">Marital Status</h6>
                                <p class="mb-0 font-weight-medium">${other.personalDetails.maritalStatus || 'N/A'}</p>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            }
        }

        document.getElementById("view-container").innerHTML = html;
        // Add a subtle loading animation
        const sections = document.querySelectorAll('.section-container');
        sections.forEach((section, index) => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

            setTimeout(() => {
                section.style.opacity = '1';
                section.style.transform = 'translateY(0)';
            }, 100 * index);
        });

    } catch (error) {
        displayStatus(error.message, "danger");
        console.error(error);
    }
}

// Call the function with the resume data
viewNetworkDetails(JSON.stringify(resumeData));
//displayWorkSummary(resumeData.otherDetails.workSummary);
